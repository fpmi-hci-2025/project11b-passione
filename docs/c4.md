# C4 Model (Passione)

### C4 Context

![C4 Context](https://www.plantuml.com/plantuml/svg/JP2nJiCm48PtFyKf2mjHLOcf0seKnDmIbTrWfxMQs9NFKIaJX149YJV906e5ZNY5ynlL2H9a-AN_llll7swAZbjNbGN3jT8RRda9kEB2R9LUGiuBb8FD7RzVBwsfj4XDOIniLyeDzrSovrNXherscNgKCBvWx0pIyGJIWEI3OnjfqMY8RXKgPsm4767nHpF7yxndsNyq4QNIFKm4OxX39qk8PXnH6IqXwy7lqGuPMq0SNtOM9Z2_YUb8dzJwjtEWFJNq5RHdcHk4wCS_qS6_qt7adtrDZQ_zIt2lB173M4CVeUn0RLSo2cCRz1qkwm03ObEfHVV94m)

<details><summary>PlantUML source</summary>

```plantuml
@startuml
skinparam shadowing false
skinparam backgroundColor white
skinparam DefaultFontSize 14

' C1: Context
person "Visitor" as U
person "Staff" as St
person "Admin" as Ad

system "Passione System" as Sys

U --> Sys : QR-меню, заказ
St --> Sys : приём/статусы
Ad --> Sys : админка/аналитика
@enduml

```

</details>

### C4 Container

![C4 Container](https://www.plantuml.com/plantuml/svg/NP51JiCm54JtFiLNDi2Y2n0h5gYX0IaIeBHkOVrJEwtLnAxyVwW0SGLkmmxkK6w4uwgbxIOQpvju9agV63stJIreOUmIFJP0SrHkPUmCAgn9xv4IfukPTwrL0rSx3wkvuNsUwGhRck-SPMdUD9nV2d42Wuih60GBZTMUn38yd8NaoP1XvnD0WidEbOnL5Jt9EpDLZR7HJ9MmJcb82YGopcgGhyIwIU1T04nTimoUvS2VKpWTZc3zlVvQ__n-diNNWtiOYtKmnhBM39CyXiRfpM4erczfcZtaZqUyo45g_sAcUXCfyX1Go5WYTLiTySnhERoFE3kwVgILeKX6jraknOSG4-ZrhkDQoL5scr8LvMP0zttn5Be2tEb8_qzXMQT3vLPkElhQgkwl_m4)

<details><summary>PlantUML source</summary>

```plantuml
@startuml
skinparam shadowing false
skinparam backgroundColor white
skinparam DefaultFontSize 14

' C2: Containers
person "Visitor" as U
person "Staff" as St
person "Admin" as Ad
node "Passione System" {
  component "PWA (QR меню)" as PWA
  component "Staff Tablet UI" as TAB
  component "Admin UI" as ADMIN
  component "API Service" as API
  database "PostgreSQL" as DB
  component "Redis" as REDIS
}

U --> PWA
St --> TAB
Ad --> ADMIN
PWA --> API
TAB --> API
ADMIN --> API
API --> DB
API --> REDIS
@enduml

```

</details>

### C4 Component

![C4 Component](https://www.plantuml.com/plantuml/svg/RP71QiCm44Jl-eebbvv2AUqfXn9L8L2eSMfzmTfUEIAoP2IveVtwAdOQLBUtGJEZjp3R4D77iJSidBGTq6CFuOYjEslRWK8JA7DgR4wTTwDjXJFEm_ceO-xlIE5eujxPAFKNmSCJOtSW7ZSWN3yuIpO6S0huuHKa-G_T46j-75YLlYKlKjaxOyYl00EK8ayKPCT5eFWLu1RDPzHDMAIu-0Ew7Z1Jv9AIkuNy5v57k6GjHgmn4AmEBiJEatn_cxpTIrwlgDLXUgyOAmMiryyNV36hXEApIZ-MSbAfNzmKlwchMy46Xh6-3sCDAcsI1bKAh8jQwGQZTZQmBTdsil4t)

<details><summary>PlantUML source</summary>

```plantuml
@startuml
skinparam shadowing false
skinparam backgroundColor white
skinparam DefaultFontSize 14

' C3: Components of API Service
component "OrderController" as OC
component "MenuController" as MC
component "AnalyticsController" as AC
component "OrderService" as OS
component "MenuService" as MS
component "AnalyticsService" as AS
database "PostgreSQL" as DB
component "Redis" as R

OC --> OS
MC --> MS
AC --> AS
OS --> DB
MS --> DB
AS --> DB
OS --> R : pub/sub for staff notifications
@enduml

```

</details>

